<html>
<head>
        <title>orientation</title>
</head>
<body>

<h1>Hello, hi</h1>

<script>
  function givePermission() {
    // feature detect
    if (typeof DeviceOrientationEvent.requestPermission === 'function') {
      DeviceOrientationEvent.requestPermission()
        .then(permissionState => {
          if (permissionState === 'granted') {
            window.addEventListener('deviceorientation', handleOrientation, true);
          }
        })
        .catch(console.error);
    } else {
      // handle regular non iOS 13+ devices
      window.addEventListener('deviceorientation', handleOrientation, true);

    }
  }

  function handleOrientation(event)
  {
    var heading = event.alpha;

    if (typeof event.webkitCompassHeading !== "undefined") {
       heading = event.webkitCompassHeading;
     }

    document.getElementById("heading").innerHTML = heading.toFixed([0]);
  }
  


</script>

<input type="button" value="Ok to see orientation" onClick="givePermission();" />

<p id="heading">n/a</p>


</body>
</html>


